#   "25"="MA",
#   "26"="MI",
#   "27"="MN",
#   "28"="MS",
#   "29"="MO",
#   "30"="MT",
#   "31"="NE",
#   "32"="NV",
#   "33"="NH",
#   "34"="NJ",
#   "35"="NM",
#   "36"="NY",
#   "37"="NC",
#   "38"="ND",
#   "39"="OH",
#   "40"="OK",
#   "41"="OR",
#   "42"="PA",
#   "44"="RI",
#   "45"="SC",
#   "46"="SD",
#   "47"="TN",
#   "48"="TX",
#   "49"="UT",
#   "50"="VT",
#   "51"="VA",
#   "53"="WA",
#   "54"="WV",
#   "55"="WI",
#   "56"="WY",
#   "57"="US"
# )
#
# state_labeller<-function(variable,value){
#   return(statenames[value])
# }
# #Generate small mutiple line graphs for cropland conversion rate only
# ggplot(df, aes(x=year, y=acres, group=label)) +
#   geom_line(color="green")+
#   facet_wrap(~ atlas_st)+
#   scale_x_continuous(breaks=c(2009,2010,2011,2012,2013,2014,2015,2016))+
#   labs(y="Percentage of National Contribution",x="Years",color="none",caption="The U.S. conversion values were divided by 10 to maintain scale consistency.")+
#   ggtitle("Cropland Abandonment 2009-2016")
#   theme(axis.ticks = element_blank(),
#         axis.text.x = element_text(size=6,angle=90),
#         axis.title.y =element_text(color="green"),
#         panel.grid.minor.x=element_blank(),
#         plot.title = element_text(hjust = 0.5),
#         plot.caption = element_text(hjust = 0.5),
#         legend.position = "none"
#   )
# pdf("C:\\Users\\Bougie\\Desktop\\Gibbs\\scripts\\projects\\usxp\\stages\\post\\cdl\\r_code\\plotResult_rate_yfc.pdf")
# print(plotResult2)
# dev.off()
#
#
# #Generate small mutiple line graphs for cropland conversion (in million acres) only
# plotResult3<-ggplot(conversionP, aes(x=year, y=conv_ac, group=st_abbrev)) +
#   geom_line(color="tomato")+
#   facet_wrap(~ state_fips)+
#   scale_y_continuous(labels=formatAC)+
#   scale_x_continuous(breaks=c(2009,2010,2011,2012,2013,2014,2015,2016)+
#   labs(y="Acreage in Million",x="Years",color="none",caption="The U.S. conversion values were divided by 10 to maintain scale consistency.")+
#   ggtitle("Cropland Abandonment 2009-2016")+
#   theme(axis.ticks = element_blank(),
#         axis.text.x = element_text(size=6,angle=90),
#         axis.title.y=element_text(color="tomato"),
#         panel.grid.minor.x=element_blank(),
#         plot.title = element_text(hjust = 0.5),
#         plot.caption = element_text(hjust = 0.5),
#         legend.position = "none"
#   )
# pdf("G:/GLUE_Work/Projects/USXP0916_yfc/plotResult_acreage_yfc.pdf")
# print(plotResult3)
# dev.off()
df <- dbGetQuery(con, "SELECT label::integer,name,value,color, atlas_st, acres, year::integer, st_abbrev FROM counts_yxc.s20_ytc30_2008to2017_mmu5_fc_states a INNER JOIN misc.lookup_cdl b ON a.label::integer=b.value where color IS NOT NULL")
formatAC<-function(x){x/1000000}
##this reorders the labels in the legend in chronological order
df$name <- with(df, reorder(name, -acres))
jColors <- df$color
names(jColors) <- df$name
print(head(jColors))
yo <- ggplot(df, aes(x=year, y=acres, group=name, color=name, ordered = TRUE)) +
geom_line(size=0.80) +
facet_wrap(~ st_abbrev)+
scale_linetype_manual(values=c("dashed"))+
scale_y_continuous(labels=formatAC) +
scale_x_continuous(breaks=c(2009,2010,2011,2012,2013,2014,2015,2016)) +
labs(y="Acreage in Millions",x="Years")+
ggtitle('Selected First Croptypes') + theme(plot.title = element_text(hjust = 0.5)) +
theme(aspect.ratio=0.5,
legend.title=element_blank(),
legend.position = c(0.07, -0.35), ##this creates 1 to 1 aspect ratio so when export to pdf not stretched
axis.text.x = element_text(size=6,angle=90))+
scale_colour_manual(values = jColors)
pdf("C:\\Users\\Bougie\\Desktop\\Gibbs\\scripts\\projects\\usxp\\stages\\post\\cdl\\r_code\\plotResult_rate_yfc.pdf")
print(yo)
dev.off()
library(data.table)
library(maptools)#R package with useful map tools
library(rgeos)#Geomegry Engine Open Source (GEOS)
library(rgdal)#Geospatial Data Analysis Library (GDAL)
library(ggplot2)
library(extrafont)
library(RColorBrewer)
library(plotly)
library(dplyr)
library(geofacet)
library(rgdal)# R wrapper around GDAL/OGR
require("RPostgreSQL")
library(dplyr)
#Get rid of anything saved in your workspace
rm(list=ls())
drv <- dbDriver("PostgreSQL")
con <- dbConnect(drv, dbname = "usxp",
host = "144.92.235.105", port = 5432,
user = "mbougie", password = "Mend0ta!")
# # "SELECT value,acres,series,yxc,year,name,color FROM cdl_counts.merged_series a INNER JOIN misc.lookup_cdl b using(value) WHERE value=1 or value=2 or value=4 or value=5 or value=23 or value=24 or value=36 or value=61")
# #Set up conversion data variable by reading through the standardized data table
# df <- dbGetQuery(con, "SELECT label::integer,value,color, atlas_st, acres, year::integer, st_abbrev FROM counts_yxc.s20_ytc30_2008to2017_mmu5_fc_states a INNER JOIN misc.lookup_cdl b ON a.label::integer=b.value where color IS NOT NULL")
# # conversionP$state_fips
# ###### Generate bivariate small multiple line graphs ##############################
# formatAC<-function(x){x/1000000}
# # #color2011<-ifelse(conversionP$year==2011,"steelblue3","black")
# #
# statenames<- list(
#   "01"="AL",
#   "04"="AZ",
#   "05"="AR",
#   "06"="CA",
#   "08"="CO",
#   "09"="CT",
#   "10"="DE",
#   "12"="FL",
#   "13"="GA",
#   "16"="ID",
#   "17"="IL",
#   "18"="IN",
#   "19"="IA",
#   "20"="KS",
#   "21"="KY",
#   "22"="LA",
#   "23"="ME",
#   "24"="MD",
#   "25"="MA",
#   "26"="MI",
#   "27"="MN",
#   "28"="MS",
#   "29"="MO",
#   "30"="MT",
#   "31"="NE",
#   "32"="NV",
#   "33"="NH",
#   "34"="NJ",
#   "35"="NM",
#   "36"="NY",
#   "37"="NC",
#   "38"="ND",
#   "39"="OH",
#   "40"="OK",
#   "41"="OR",
#   "42"="PA",
#   "44"="RI",
#   "45"="SC",
#   "46"="SD",
#   "47"="TN",
#   "48"="TX",
#   "49"="UT",
#   "50"="VT",
#   "51"="VA",
#   "53"="WA",
#   "54"="WV",
#   "55"="WI",
#   "56"="WY",
#   "57"="US"
# )
#
# state_labeller<-function(variable,value){
#   return(statenames[value])
# }
# #Generate small mutiple line graphs for cropland conversion rate only
# ggplot(df, aes(x=year, y=acres, group=label)) +
#   geom_line(color="green")+
#   facet_wrap(~ atlas_st)+
#   scale_x_continuous(breaks=c(2009,2010,2011,2012,2013,2014,2015,2016))+
#   labs(y="Percentage of National Contribution",x="Years",color="none",caption="The U.S. conversion values were divided by 10 to maintain scale consistency.")+
#   ggtitle("Cropland Abandonment 2009-2016")
#   theme(axis.ticks = element_blank(),
#         axis.text.x = element_text(size=6,angle=90),
#         axis.title.y =element_text(color="green"),
#         panel.grid.minor.x=element_blank(),
#         plot.title = element_text(hjust = 0.5),
#         plot.caption = element_text(hjust = 0.5),
#         legend.position = "none"
#   )
# pdf("C:\\Users\\Bougie\\Desktop\\Gibbs\\scripts\\projects\\usxp\\stages\\post\\cdl\\r_code\\plotResult_rate_yfc.pdf")
# print(plotResult2)
# dev.off()
#
#
# #Generate small mutiple line graphs for cropland conversion (in million acres) only
# plotResult3<-ggplot(conversionP, aes(x=year, y=conv_ac, group=st_abbrev)) +
#   geom_line(color="tomato")+
#   facet_wrap(~ state_fips)+
#   scale_y_continuous(labels=formatAC)+
#   scale_x_continuous(breaks=c(2009,2010,2011,2012,2013,2014,2015,2016)+
#   labs(y="Acreage in Million",x="Years",color="none",caption="The U.S. conversion values were divided by 10 to maintain scale consistency.")+
#   ggtitle("Cropland Abandonment 2009-2016")+
#   theme(axis.ticks = element_blank(),
#         axis.text.x = element_text(size=6,angle=90),
#         axis.title.y=element_text(color="tomato"),
#         panel.grid.minor.x=element_blank(),
#         plot.title = element_text(hjust = 0.5),
#         plot.caption = element_text(hjust = 0.5),
#         legend.position = "none"
#   )
# pdf("G:/GLUE_Work/Projects/USXP0916_yfc/plotResult_acreage_yfc.pdf")
# print(plotResult3)
# dev.off()
df <- dbGetQuery(con, "SELECT label::integer,name,value,color, atlas_st, acres, year::integer, st_abbrev FROM counts_yxc.s20_ytc30_2008to2017_mmu5_fc_states a INNER JOIN misc.lookup_cdl b ON a.label::integer=b.value where color IS NOT NULL")
formatAC<-function(x){x/1000000}
##this reorders the labels in the legend in chronological order
df$name <- with(df, reorder(name, -acres))
jColors <- df$color
names(jColors) <- df$name
print(head(jColors))
yo <- ggplot(df, aes(x=year, y=acres, group=name, color=name, ordered = TRUE)) +
geom_line(size=0.80) +
facet_wrap(~ st_abbrev)+
scale_linetype_manual(values=c("dashed"))+
scale_y_continuous(labels=formatAC) +
scale_x_continuous(breaks=c(2009,2010,2011,2012,2013,2014,2015,2016)) +
labs(y="Acreage in Millions",x="Years")+
ggtitle('Selected First Croptypes') + theme(plot.title = element_text(hjust = 0.5)) +
theme(aspect.ratio=0.5,
legend.title=element_blank(),
legend.position = c(0.07, -0.35), ##this creates 1 to 1 aspect ratio so when export to pdf not stretched
axis.text.x = element_text(size=6,angle=90))+
scale_colour_manual(values = jColors)
pdf("C:\\Users\\Bougie\\Desktop\\Gibbs\\scripts\\projects\\usxp\\stages\\post\\cdl\\r_code\\plotResult_rate_yfc.pdf")
print(yo)
dev.off()
library(data.table)
library(maptools)#R package with useful map tools
library(rgeos)#Geomegry Engine Open Source (GEOS)
library(rgdal)#Geospatial Data Analysis Library (GDAL)
library(ggplot2)
library(extrafont)
library(RColorBrewer)
library(plotly)
library(dplyr)
library(geofacet)
library(rgdal)# R wrapper around GDAL/OGR
require("RPostgreSQL")
library(dplyr)
#Get rid of anything saved in your workspace
rm(list=ls())
drv <- dbDriver("PostgreSQL")
con <- dbConnect(drv, dbname = "usxp",
host = "144.92.235.105", port = 5432,
user = "mbougie", password = "Mend0ta!")
# # "SELECT value,acres,series,yxc,year,name,color FROM cdl_counts.merged_series a INNER JOIN misc.lookup_cdl b using(value) WHERE value=1 or value=2 or value=4 or value=5 or value=23 or value=24 or value=36 or value=61")
# #Set up conversion data variable by reading through the standardized data table
# df <- dbGetQuery(con, "SELECT label::integer,value,color, atlas_st, acres, year::integer, st_abbrev FROM counts_yxc.s20_ytc30_2008to2017_mmu5_fc_states a INNER JOIN misc.lookup_cdl b ON a.label::integer=b.value where color IS NOT NULL")
# # conversionP$state_fips
# ###### Generate bivariate small multiple line graphs ##############################
# formatAC<-function(x){x/1000000}
# # #color2011<-ifelse(conversionP$year==2011,"steelblue3","black")
# #
# statenames<- list(
#   "01"="AL",
#   "04"="AZ",
#   "05"="AR",
#   "06"="CA",
#   "08"="CO",
#   "09"="CT",
#   "10"="DE",
#   "12"="FL",
#   "13"="GA",
#   "16"="ID",
#   "17"="IL",
#   "18"="IN",
#   "19"="IA",
#   "20"="KS",
#   "21"="KY",
#   "22"="LA",
#   "23"="ME",
#   "24"="MD",
#   "25"="MA",
#   "26"="MI",
#   "27"="MN",
#   "28"="MS",
#   "29"="MO",
#   "30"="MT",
#   "31"="NE",
#   "32"="NV",
#   "33"="NH",
#   "34"="NJ",
#   "35"="NM",
#   "36"="NY",
#   "37"="NC",
#   "38"="ND",
#   "39"="OH",
#   "40"="OK",
#   "41"="OR",
#   "42"="PA",
#   "44"="RI",
#   "45"="SC",
#   "46"="SD",
#   "47"="TN",
#   "48"="TX",
#   "49"="UT",
#   "50"="VT",
#   "51"="VA",
#   "53"="WA",
#   "54"="WV",
#   "55"="WI",
#   "56"="WY",
#   "57"="US"
# )
#
# state_labeller<-function(variable,value){
#   return(statenames[value])
# }
# #Generate small mutiple line graphs for cropland conversion rate only
# ggplot(df, aes(x=year, y=acres, group=label)) +
#   geom_line(color="green")+
#   facet_wrap(~ atlas_st)+
#   scale_x_continuous(breaks=c(2009,2010,2011,2012,2013,2014,2015,2016))+
#   labs(y="Percentage of National Contribution",x="Years",color="none",caption="The U.S. conversion values were divided by 10 to maintain scale consistency.")+
#   ggtitle("Cropland Abandonment 2009-2016")
#   theme(axis.ticks = element_blank(),
#         axis.text.x = element_text(size=6,angle=90),
#         axis.title.y =element_text(color="green"),
#         panel.grid.minor.x=element_blank(),
#         plot.title = element_text(hjust = 0.5),
#         plot.caption = element_text(hjust = 0.5),
#         legend.position = "none"
#   )
# pdf("C:\\Users\\Bougie\\Desktop\\Gibbs\\scripts\\projects\\usxp\\stages\\post\\cdl\\r_code\\plotResult_rate_yfc.pdf")
# print(plotResult2)
# dev.off()
#
#
# #Generate small mutiple line graphs for cropland conversion (in million acres) only
# plotResult3<-ggplot(conversionP, aes(x=year, y=conv_ac, group=st_abbrev)) +
#   geom_line(color="tomato")+
#   facet_wrap(~ state_fips)+
#   scale_y_continuous(labels=formatAC)+
#   scale_x_continuous(breaks=c(2009,2010,2011,2012,2013,2014,2015,2016)+
#   labs(y="Acreage in Million",x="Years",color="none",caption="The U.S. conversion values were divided by 10 to maintain scale consistency.")+
#   ggtitle("Cropland Abandonment 2009-2016")+
#   theme(axis.ticks = element_blank(),
#         axis.text.x = element_text(size=6,angle=90),
#         axis.title.y=element_text(color="tomato"),
#         panel.grid.minor.x=element_blank(),
#         plot.title = element_text(hjust = 0.5),
#         plot.caption = element_text(hjust = 0.5),
#         legend.position = "none"
#   )
# pdf("G:/GLUE_Work/Projects/USXP0916_yfc/plotResult_acreage_yfc.pdf")
# print(plotResult3)
# dev.off()
df <- dbGetQuery(con, "SELECT label::integer,name,value,color, atlas_st, acres, year::integer, st_abbrev FROM counts_yxc.s20_ytc30_2008to2017_mmu5_fc_states a INNER JOIN misc.lookup_cdl b ON a.label::integer=b.value where color IS NOT NULL")
formatAC<-function(x){x/1000000}
##this reorders the labels in the legend in chronological order
df$name <- with(df, reorder(name, -acres))
jColors <- df$color
names(jColors) <- df$name
print(head(jColors))
yo <- ggplot(df, aes(x=year, y=acres, group=name, color=name, ordered = TRUE)) +
geom_line(size=0.80) +
facet_wrap(~ st_abbrev)+
scale_linetype_manual(values=c("dashed"))+
scale_y_continuous(labels=formatAC) +
scale_x_continuous(breaks=c(2009,2010,2011,2012,2013,2014,2015,2016)) +
labs(y="Acreage in Millions",x="Years")+
ggtitle('Selected First Croptypes') + theme(plot.title = element_text(hjust = 0.5)) +
theme(aspect.ratio=0.5,
legend.title=element_blank(),
legend.position = c(0.07, -0.35), ##this creates 1 to 1 aspect ratio so when export to pdf not stretched
axis.text.x = element_text(size=6,angle=90))+
scale_colour_manual(values = jColors)
pdf("C:\\Users\\Bougie\\Desktop\\Gibbs\\scripts\\projects\\usxp\\stages\\post\\cdl\\r_code\\plotResult_rate_yfc.pdf")
print(yo)
dev.off()
library(data.table)
library(maptools)#R package with useful map tools
library(rgeos)#Geomegry Engine Open Source (GEOS)
library(rgdal)#Geospatial Data Analysis Library (GDAL)
library(ggplot2)
library(extrafont)
library(RColorBrewer)
library(plotly)
library(dplyr)
library(geofacet)
library(rgdal)# R wrapper around GDAL/OGR
require("RPostgreSQL")
library(dplyr)
#Get rid of anything saved in your workspace
rm(list=ls())
drv <- dbDriver("PostgreSQL")
con <- dbConnect(drv, dbname = "usxp",
host = "144.92.235.105", port = 5432,
user = "mbougie", password = "Mend0ta!")
df <- dbGetQuery(con, "SELECT label::integer,name,value,color, atlas_st, acres, year::integer, st_abbrev FROM counts_yxc.s20_ytc30_2008to2017_mmu5_fc_states a INNER JOIN misc.lookup_cdl b ON a.label::integer=b.value where color IS NOT NULL")
formatAC<-function(x){x/1000000}
##this reorders the labels in the legend in chronological order
df$name <- with(df, reorder(name, -acres))
jColors <- df$color
names(jColors) <- df$name
print(head(jColors))
yo <- ggplot(df, aes(x=year, y=acres, group=name, color=name, ordered = TRUE)) +
geom_line(size=0.40) +
facet_wrap(~ st_abbrev)+
scale_linetype_manual(values=c("dashed"))+
scale_y_continuous(labels=formatAC) +
scale_x_continuous(breaks=c(2009,2010,2011,2012,2013,2014,2015,2016)) +
labs(y="Acreage in Millions",x="Years")+
ggtitle('Selected First Croptypes') + theme(plot.title = element_text(hjust = 0.5)) +
theme(aspect.ratio=0.5,
legend.title=element_blank(),
legend.position = c(0.07, -0.35), ##this creates 1 to 1 aspect ratio so when export to pdf not stretched
axis.text.x = element_text(size=6,angle=90))+
scale_colour_manual(values = jColors)
pdf("C:\\Users\\Bougie\\Desktop\\Gibbs\\scripts\\projects\\usxp\\stages\\post\\cdl\\r_code\\plotResult_rate_yfc.pdf")
print(yo)
dev.off()
library(data.table)
library(maptools)#R package with useful map tools
library(rgeos)#Geomegry Engine Open Source (GEOS)
library(rgdal)#Geospatial Data Analysis Library (GDAL)
library(ggplot2)
library(extrafont)
library(RColorBrewer)
library(plotly)
library(dplyr)
library(geofacet)
library(rgdal)# R wrapper around GDAL/OGR
require("RPostgreSQL")
library(dplyr)
#Get rid of anything saved in your workspace
rm(list=ls())
drv <- dbDriver("PostgreSQL")
con <- dbConnect(drv, dbname = "usxp",
host = "144.92.235.105", port = 5432,
user = "mbougie", password = "Mend0ta!")
df <- dbGetQuery(con, "SELECT label::integer,name,value,color, atlas_st, acres, year::integer, st_abbrev FROM counts_yxc.s20_ytc30_2008to2017_mmu5_fc_states a INNER JOIN misc.lookup_cdl b ON a.label::integer=b.value where color IS NOT NULL")
formatAC<-function(x){x/1000000}
##this reorders the labels in the legend in chronological order
df$name <- with(df, reorder(name, -acres))
jColors <- df$color
names(jColors) <- df$name
print(head(jColors))
yo <- ggplot(df, aes(x=year, y=acres, group=name, color=name, ordered = TRUE)) +
geom_line(size=0.50) +
facet_wrap(~ st_abbrev)+
scale_linetype_manual(values=c("dashed"))+
scale_y_continuous(labels=formatAC) +
scale_x_continuous(breaks=c(2009,2010,2011,2012,2013,2014,2015,2016)) +
labs(y="Acreage in Millions",x="Years")+
ggtitle('Selected First Croptypes') + theme(plot.title = element_text(hjust = 0.5)) +
theme(aspect.ratio=0.5,
legend.title=element_blank(),
legend.position = c(0.07, -0.35), ##this creates 1 to 1 aspect ratio so when export to pdf not stretched
axis.text.x = element_text(size=6,angle=90))+
scale_colour_manual(values = jColors)
pdf("C:\\Users\\Bougie\\Desktop\\Gibbs\\scripts\\projects\\usxp\\stages\\post\\cdl\\r_code\\plotResult_rate_yfc.pdf")
print(yo)
dev.off()
library(data.table)
library(maptools)#R package with useful map tools
library(rgeos)#Geomegry Engine Open Source (GEOS)
library(rgdal)#Geospatial Data Analysis Library (GDAL)
library(ggplot2)
library(extrafont)
library(RColorBrewer)
library(plotly)
library(dplyr)
library(geofacet)
library(rgdal)# R wrapper around GDAL/OGR
require("RPostgreSQL")
library(dplyr)
#Get rid of anything saved in your workspace
rm(list=ls())
drv <- dbDriver("PostgreSQL")
con <- dbConnect(drv, dbname = "usxp",
host = "144.92.235.105", port = 5432,
user = "mbougie", password = "Mend0ta!")
df <- dbGetQuery(con, "SELECT label::integer,name,value,color, atlas_st, acres, year::integer, st_abbrev FROM counts_yxc.s20_ytc30_2008to2017_mmu5_fc_states a INNER JOIN misc.lookup_cdl b ON a.label::integer=b.value where color IS NOT NULL")
formatAC<-function(x){x/1000000}
##this reorders the labels in the legend in chronological order
df$name <- with(df, reorder(name, -acres))
jColors <- df$color
names(jColors) <- df$name
print(head(jColors))
yo <- ggplot(df, aes(x=year, y=acres, group=name, color=name, ordered = TRUE)) +
geom_line(size=0.50) +
facet_wrap(~ st_abbrev)+
scale_linetype_manual(values=c("dashed"))+
scale_y_continuous(labels=formatAC) +
scale_x_continuous(breaks=c(2009,2010,2011,2012,2013,2014,2015,2016)) +
labs(y="Acreage in Millions",x="Years")+
ggtitle('Selected First Croptypes') + theme(plot.title = element_text(hjust = 0.5)) +
theme(aspect.ratio=0.5,
legend.title=element_blank(),
legend.position = c(0.07, -0.35), ##this creates 1 to 1 aspect ratio so when export to pdf not stretched
axis.text.x = element_text(size=6,angle=90))+
scale_colour_manual(values = jColors)
pdf("C:\\Users\\Bougie\\Desktop\\Gibbs\\scripts\\projects\\usxp\\stages\\post\\cdl\\r_code\\plotResult_rate_yfc.pdf")
print(yo)
dev.off()
